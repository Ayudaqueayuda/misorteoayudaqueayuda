<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sorteo Din√°mico</title>
    <style>
        /* Aqu√≠ ir√≠a el CSS para el estilo de tu p√°gina */
        body { font-family: sans-serif; margin: 20px; }
        .container { max-width: 800px; margin: auto; padding: 20px; border: 1px solid #ccc; border-radius: 8px; }
        input[type="number"], input[type="text"], button { padding: 10px; margin-right: 10px; margin-bottom: 10px; border-radius: 5px; border: 1px solid #ddd; }
        button { background-color: #4CAF50; color: white; cursor: pointer; }
        button:hover { opacity: 0.9; }
        #participantesList { list-style: none; padding: 0; }
        #participantesList li { background-color: #f9f9f9; padding: 8px; margin-bottom: 5px; border-radius: 4px; }
        .winner { font-size: 1.2em; font-weight: bold; color: green; margin-top: 20px;}
    </style>
</head>
<body>
  <div id="configuracionSorteo">
    <h1>Organiza tu Sorteo</h1>
    <p>Ingresa la cantidad m√°xima de n√∫meros para el sorteo (Ej: si pones 100, los n√∫meros ir√°n del 1 al 100).</p>
    <input type="number" id="maxNumero" placeholder="Cantidad total de n√∫meros" min="1">
    <button onclick="configurarNumeros()">Configurar N√∫meros</button>
    <hr>
</div>

<div id="registroParticipantes" style="display: none;">
    <h2>Registrar Participante</h2>
<input type="text" id="nombreParticipante" placeholder="Nombre del participante">
<input type="number" id="cantidadBoletos" placeholder="Cantidad de boletos" min="1" value="1"> <button onclick="asignarNumero()">Asignar N√∫mero y Registrar</button>
    <hr>

    <h2>Participantes Registrados</h2>
    <ul id="participantesList">
        </ul>
    <hr>

    <h2>Realizar Sorteo</h2>
    <button onclick="realizarSorteo()">Elegir Ganador</button>
    <div id="ganador" class="winner"></div>
</div>

    <script>
        let numerosDisponibles = [];
let participantes = [];
let maxNumberConfigured = 0;

function configurarNumeros() {
    maxNumberConfigured = parseInt(document.getElementById('maxNumero').value);
    if (isNaN(maxNumberConfigured) || maxNumberConfigured <= 0) {
        alert('Por favor, ingresa un n√∫mero v√°lido y mayor que cero para la cantidad de n√∫meros.');
        return;
    }
    numerosDisponibles = Array.from({length: maxNumberConfigured}, (_, i) => i + 1); // Crea un array de 1 a maxNumero
    alert(`Sorteo configurado con ${maxNumberConfigured} n√∫meros.`);

    // Ocultar la secci√≥n de configuraci√≥n
    document.getElementById('configuracionSorteo').style.display = 'none';

    // Mostrar la secci√≥n de registro y sorteo
    document.getElementById('registroParticipantes').style.display = 'block';
}
function asignarNumero() {
    const nombre = document.getElementById('nombreParticipante').value.trim();
    const cantidadBoletos = parseInt(document.getElementById('cantidadBoletos').value); // NUEVA L√çNEA: Obtener la cantidad de boletos

    if (!nombre) {
        alert('Por favor, ingresa el nombre del participante.');
        return;
    }

    if (isNaN(cantidadBoletos) || cantidadBoletos <= 0) { // NUEVA VALIDACI√ìN
        alert('Por favor, ingresa una cantidad v√°lida de boletos (al menos 1).');
        return;
    }

    if (maxNumberConfigured === 0) {
        alert('Por favor, configura la cantidad total de n√∫meros antes de asignar.');
        return;
    }

    if (numerosDisponibles.length === 0) {
        alert('¬°Se han asignado todos los n√∫meros disponibles! No hay m√°s n√∫meros para repartir.');
        return;
    }

    if (cantidadBoletos > numerosDisponibles.length) { // NUEVA VALIDACI√ìN: No hay suficientes boletos
        alert(`No hay suficientes n√∫meros disponibles para asignar ${cantidadBoletos} boletos. Solo quedan ${numerosDisponibles.length}.`);
        return;
    }

    let boletosAsignados = []; // Para guardar los n√∫meros que se le asignan a este participante

    for (let i = 0; i < cantidadBoletos; i++) { // Bucle para asignar m√∫ltiples boletos
        const indiceAleatorio = Math.floor(Math.random() * numerosDisponibles.length);
        const numeroAsignado = numerosDisponibles[indiceAleatorio];

        numerosDisponibles.splice(indiceAleatorio, 1); // Eliminar el n√∫mero asignado

        boletosAsignados.push(numeroAsignado); // A√±adir el n√∫mero a la lista de boletos de este participante
    }

    // Guardar el participante con todos sus boletos
    participantes.push({ nombre: nombre, numeros: boletosAsignados }); // CAMBIO: 'numero' ahora es 'numeros' (un array)

    // Mostrar en la lista de participantes
    const lista = document.getElementById('participantesList');
    const nuevoItem = document.createElement('li');
    // Muestra los n√∫meros asignados separados por comas
    nuevoItem.textContent = `${nombre} - N√∫meros: ${boletosAsignados.join(', ')}`;
    lista.appendChild(nuevoItem);

    // Limpiar los campos
    document.getElementById('nombreParticipante').value = '';
    document.getElementById('cantidadBoletos').value = '1'; // Resetea a 1 por defecto
}

    if (maxNumberConfigured === 0) {
        alert('Por favor, configura la cantidad total de n√∫meros antes de asignar.');
        return;
    }

    if (numerosDisponibles.length === 0) {
        alert('¬°Se han asignado todos los n√∫meros disponibles! No hay m√°s n√∫meros para repartir.');
        return;
    }

    // Seleccionar un n√∫mero aleatorio de los disponibles
    const indiceAleatorio = Math.floor(Math.random() * numerosDisponibles.length);
    const numeroAsignado = numerosDisponibles[indiceAleatorio];

    // Eliminar el n√∫mero asignado del array de disponibles para evitar duplicados
    numerosDisponibles.splice(indiceAleatorio, 1);

    // Guardar el participante
    participantes.push({ nombre: nombre, numero: numeroAsignado });

    // Mostrar en la lista
    const lista = document.getElementById('participantesList');
    const nuevoItem = document.createElement('li');
    nuevoItem.textContent = `${nombre} - N√∫mero: ${numeroAsignado}`;
    lista.appendChild(nuevoItem);

    // Limpiar el campo de nombre
    document.getElementById('nombreParticipante').value = '';
}

function realizarSorteo() {
    if (participantes.length === 0) {
        alert('No hay participantes registrados para realizar el sorteo.');
        return;
    }

    // Elige un participante ganador al azar
    const indiceGanador = Math.floor(Math.random() * participantes.length);
    const ganador = participantes[indiceGanador];

    const divGanador = document.getElementById('ganador');
    // Muestra al ganador y todos los n√∫meros que ten√≠a asignados
    divGanador.textContent = `¬°El ganador es: ${ganador.nombre} con los n√∫meros: ${ganador.numeros.join(', ')}! üéâ`;
}

    const indiceGanador = Math.floor(Math.random() * participantes.length);
    const ganador = participantes[indiceGanador];

    const divGanador = document.getElementById('ganador');
    divGanador.textContent = `¬°El ganador es: ${ganador.nombre} con el n√∫mero ${ganador.numero}! üéâ`;
}
    </script>
</body>
</html>